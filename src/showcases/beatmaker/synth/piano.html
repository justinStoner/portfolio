<template>
  <require from="./components/piano-key"></require>
  <require from="../components/sound-wave"></require>
  <require from="../components/mute-button"></require>
  <require from="../components/knob"></require>
  <require from="./styles/synth.css"></require>
  <require from='./components/oscillator'></require>
  <div class="au-animate col l6 m12">
      <div class="card" id="piano">

        <div class="card-content" style="padding:0.75rem" >
          <div class="row">
            <form class="col m3 s12">
              <oscillator gain.two-way="lfoData.gain" wave.two-way="lfoData.wave" freq.two-way="lfoData.freq" type='Lfo' modtype.two-way="lfoData.modType" detune.two-way="lfoData.detune" osc1.two-way="lfoData.osc1" osc2.two-way="lfoData.osc2"></oscillator>
            </form>
            <form class="col m3 s12" repeat.for="osc of oscillators">
              <oscillator osc.two-way="osc" index.bind="$index" type='Oscillator' preset.one-time="oscPresets[$index]"></oscillator>
            </form>
          </div>
          <div class="row">
            <form class="col m6 s12">
              <div id="filter" class="row grey lighten-3 z-depth-1 b-radius-card">
                <p>Filter</p>
                <div class="row">
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Cutoff" val.two-way="lpfCutoff" preset.one-time="2"></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="20" label="Q" val.two-way="lpfQ" preset.one-time="2"></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Mod" val.two-way="lpfMod" ></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Env" val.two-way="lpfEnv" ></knob>
                  </div>
                </div>
                <p>Envelope</p>
                <div class="row">
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Attack" val.two-way="lpfA" ></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Decay" val.two-way="lpfD" ></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Sustain" val.two-way="lpfS" ></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Release" val.two-way="lpfR" ></knob>
                  </div>
                </div>
              </div>
            </form>
            <form class="col m6 s12 b-radius-card z-depth-1" id="synth">
              <div id="synthfilter" class="row canvas-as-bg  b-radius-card">
                <p>Synth</p>
                <div class="row">
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Drive" val.two-way="lpfA" canvas.bind="true" ></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Reverb" val.two-way="lpfD" canvas.bind="true" ></knob>
                  </div>
                  <div class="col m3 s6" >
                    <knob id="soundwave" min="0" max="100" label="Volume" canvas.bind="true" val.two-way="masterVol" ></knob>
                  </div>
                  <div class="col m3 s6"  style="">
                    <p class="center-align">Effects</p>
                    <button class="btn waves-effect waves-light green accent-3" style="width:36px;padding:0;margin-top:13px;"><i class="material-icons">equalizer</i></button>
                  </div>
                </div>
                <p>Envelope</p>
                <div class="row">
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Attack" canvas.bind="true" val.two-way="envA" preset="4"></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Decay" canvas.bind="true" val.two-way="envD" preset="3"></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Sustain" canvas.bind="true" val.two-way="envS" preset="2"></knob>
                  </div>
                  <div class="col m3 s6">
                    <knob min="0" max="100" label="Release" canvas.bind="true" val.two-way="envR" ></knob>
                  </div>
                </div>
              </div>
              <sound-wave ab.bind='ab' canvas-id='synth'></sound-wave>
            </form>
          </div>
          <div class="row">

          </div>
          <div class="row" style="margin-bottom:10px;">
            <div class="col s12" id='right' style="padding:0;height:90%">
              <piano-key class="${note.color?'white'+$index:'black'+$index}" repeat.for="note of notes" playing.bind="note.isPlaying" index.bind="$index"  assigned.bind="note.assigned" key.bind="note" containerLess></piano-key>
            </div>
          </div>
        </div>
      </div>
  </div>
</template>
