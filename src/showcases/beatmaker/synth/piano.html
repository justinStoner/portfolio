<template>
  <require from="./components/piano-key"></require>
  <require from="../components/sound-wave"></require>
  <require from="../components/mute-button"></require>
  <require from="../components/knob"></require>
  <require from="./styles/synth.css"></require>
  <require from='./components/oscillator'></require>
  <require from="../effects/compressor"></require>
  <require from="../effects/delay"></require>
  <require from="../effects/equalizer"></require>
  <div class="mdl-grid">
    <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--2-col-tablet">
      <oscillator type='Lfo' osc.two-way="lfoData" preset.one-time="lfoData"></oscillator>
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--2-col-tablet" repeat.for="osc of oscillators">
      <oscillator osc.two-way="osc" index.bind="$index" type='Oscillator' preset.one-time="oscPresets[$index]"></oscillator>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-phone mdl-cell--4-col-tablet">
      <div id="filter" class="mdl-shadow--2dp mdl-color--orange-300 b-radius-card">
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--12-col">
            <p>Filter</p>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="200" label="Cutoff" val.two-way="lpfCutoff" preset.one-time="lpfCutoff"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="20" label="Q" val.two-way="lpfQ" preset.one-time="lpfQ"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Mod" val.two-way="lpfMod" preset.one-time="lpfMod"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Env" val.two-way="lpfEnv" preset.one-time="lpfEnv"></knob>
          </div>
          <div class="mdl-cell mdl-cell--12-col">
            <p>Envelope</p>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Attack" val.two-way="lpfA" preset.one-time="lpfA"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Decay" val.two-way="lpfD" preset.one-time="lpfD"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Sustain" val.two-way="lpfS" preset.one-time="lpfS"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Release" val.two-way="lpfR" preset.one-time="lpfR"></knob>
          </div>
        </div>
      </div>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-phone mdl-cell--4-col-tablet" id="synth">
      <div id="synthfilter" class="mdl-shadow--2dp b-radius-card">
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--12-col">
            <p>Synth</p>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Drive" val.two-way="lpfA" canvas.bind="true" preset.one-time="lpfA"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Reverb" val.two-way="lpfD" canvas.bind="true" preset.one-time="lpfA"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob id="soundwave" min="0" max="100" label="Volume" canvas.bind="true" val.two-way="masterVol" preset.one-time="masterVol"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">

          </div>
          <div class="mdl-cell mdl-cell--12-col">
            <p>Envelope</p>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Attack" canvas.bind="true" val.two-way="envA" preset.one-time="envA" ></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Decay" canvas.bind="true" val.two-way="envD" preset.one-time="envD"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Sustain" canvas.bind="true" val.two-way="envS" preset.one-time="envS"></knob>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-phone mdl-cell--2-col-tablet">
            <knob min="0" max="100" label="Release" canvas.bind="true" val.two-way="envR" preset.one-time="envR"></knob>
          </div>
        </div>
      </div>
      <sound-wave ab.bind='ab' canvas-id='synthfilter'></sound-wave>
    </div>
    <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-phone mdl-cell--3-col-tablet">
      <equalizer></equalizer>
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--2-col-tablet">
      <delay></delay>
    </div>
    <div class="mdl-cell mdl-cell--5-col mdl-cell--12-col-phone mdl-cell--3-col-tablet">
      <compressor></compressor>
    </div>
    <div class="mdl-cell mdl-cell--12-col">
      <piano-key class="${note.color?'white'+$index:'black'+$index}" repeat.for="note of notes" playing.bind="note.isPlaying" index.bind="$index"  assigned.bind="note.assigned" key.bind="note" containerLess></piano-key>
    </div>
  </div>
</template>
