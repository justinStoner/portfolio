<template>
  <require from="./components/piano-key"></require>
  <require from="../components/sound-wave"></require>
  <require from="../components/mute-button"></require>
  <require from="../components/slider"></require>
  <require from="./styles/synth.css"></require>
  <require from='./components/oscillator'></require>
  <require from="../effects/compressor"></require>
  <require from="../effects/delay"></require>
  <require from="../effects/equalizer"></require>
  <div class="synth-container">
    <div class="effects-container">
      <div>
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--8-col-tablet">
            <oscillator type='Lfo' osc.two-way="synth.lfoData" preset.one-time="synth.lfoData"></oscillator>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--8-col-tablet" repeat.for="osc of synth.oscillators">
            <oscillator osc.two-way="osc" index.bind="$index" type='Oscillator' preset.one-time="synth.oscPresets[$index]"></oscillator>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--4-col-tablet">
            <div id="filter" class="mdl-shadow--2dp mdl-color--orange-300 b-radius-card">
              <div class="mdl-grid">
                <div class="mdl-cell mdl-cell--12-col no-bottom-margin card-title">
                  <p class="no-bottom-margin">Filter</p>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="200" label="Cutoff" val.two-way="synth.lpfCutoff" channel='lpfCutoff' preset.one-time="synth.lpfCutoff"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="20" label="Q" channel='lpfQ' val.two-way="synth.lpfQ" preset.one-time="synth.lpfQ"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Mod" channel='lpfMod' val.two-way="synth.lpfMod" preset.one-time="synth.lpfMod"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Env" val.two-way="synth.lpfEnv" preset.one-time="synth.lpfEnv"></slider>
                </div>
                <!-- <div class="mdl-cell mdl-cell--12-col no-bottom-margin card-title">
                  <p class="no-bottom-margin no-bottom-margin">Envelope</p>
                </div> -->
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Attack" val.two-way="synth.lpfA" preset.one-time="synth.lpfA"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Decay" val.two-way="synth.lpfD" preset.one-time="synth.lpfD"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Sustain" val.two-way="synth.lpfS" preset.one-time="synth.lpfS"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Release" val.two-way="synth.lpfR" preset.one-time="synth.lpfR"></slider>
                </div>
              </div>
            </div>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--4-col-tablet" id="synth">
            <div id="synthfilter" class="mdl-shadow--2dp b-radius-card">
              <div class="mdl-grid">
                <div class="mdl-cell mdl-cell--12-col no-bottom-margin card-title">
                  <p class="no-bottom-margin" style="float:left">Synth</p>
                  <div class="synth-octave">
                    Octave: ${synth.synthOctave}
                    <button class="mdl-button mdl-js-button mdl-button--icon" style="" click.delegate="synth.changeSynthOctave('up')">
                      <i class="material-icons">add</i>
                    </button>
                    <button class="mdl-button mdl-js-button mdl-button--icon" click.delegate="synth.changeSynthOctave('down')">
                      <i class="material-icons">remove</i>
                    </button>
                  </div>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Drive" val.two-way="synth.lpfA" canvas.bind="true" preset.one-time="synth.lpfA"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Reverb" val.two-way="synth.reverbLevel" canvas.bind="true" preset.one-time="synth.reverbLevel" channel="synthreverb"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <!-- <knob id="soundwave" min="0" max="100" label="Volume" canvas.bind="true" channel='synthvol' preset.one-time="synth.masterVol"></knob> -->
                  <slider id="soundwave" min="0" max="100" label="Volume" val.two-way="synth.masterVol" channel='synthvol' canvas.bind="true" preset.one-time="synth.masterVol"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet text-center" >
                  <p style="margin-bottom:0px;">Visualizer</p>
                  <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect ${ab.showVisualizer?'mdl-color-text--green-A400 mdl-color--white':'mdl-color--green-A400 mdl-color-text--white'}" css="width:42px;height:42px;min-width:42px;border:3px solid ${ab.showVisualizer?'#00e676;':'#fff;'}" click.trigger="ab.showVisualizer=!ab.showVisualizer" id='visualizer'>
                    <i class="material-icons">graphic_eq</i>
                  </button>
                </div>
                <!-- <div class="mdl-cell mdl-cell--12-col no-bottom-margin card-title">
                  <p class="no-bottom-margin">Envelope</p>
                </div> -->
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Attack" val.two-way="synth.envA" canvas.bind="true" preset.one-time="synth.envA"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Decay" val.two-way="synth.envD" canvas.bind="true" preset.one-time="synth.envD"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Sustain" val.two-way="synth.envS" canvas.bind="true" preset.one-time="synth.envS"></slider>
                </div>
                <div class="mdl-cell mdl-cell--3-col mdl-cell--1-col-phone mdl-cell--2-col-tablet">
                  <slider min="0" max="100" label="Release" val.two-way="synth.envR" canvas.bind="true" preset.one-time="synth.envR"></slider>
                </div>
              </div>
            </div>
            <sound-wave ab.bind='ab' canvas-id='synthfilter' mode='synth' if.bind="ab.showVisualizer"></sound-wave>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--8-col-tablet">
            <equalizer mode="synth"></equalizer>
          </div>
          <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--8-col-tablet">
            <delay mode="synth"></delay>
          </div>
          <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-phone mdl-cell--8-col-tablet">
            <compressor mode="synth"></compressor>
          </div>
          <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-phone mdl-cell--8-col-tablet">
            <compressor mode="sidechain"></compressor>
          </div>
          <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-phone mdl-cell--8-col-tablet">

          </div>
          <!-- <div class="mdl-cell mdl-cell--12-col" if.bind="!ab.isMobile">
            <piano-key class="${note.color?'white'+$index:'black'+$index}" repeat.for="note of synth.notes" playing.bind="note.isPlaying" index.bind="$index"  assigned.bind="note.assigned" key.bind="note" containerLess></piano-key>
          </div> -->
        </div>
      </div>
    </div>
    <div class="key-container  b-radius-card">
      <div>
        <piano-key class="${note.color?'white'+$index:'black'+$index}" repeat.for="note of synth.notes" playing.bind="note.isPlaying" index.bind="$index"  assigned.bind="note.assigned" key.bind="note" containerLess></piano-key>
      </div>
    </div>
  </div>

</template>
