<template>
  <require from="../components/sound-wave"></require>
  <require from="./styles/sequencer.css"></require>
  <require from="../components/knob"></require>
  <require from="../components/sound-wave"></require>
  <require from="../components/slider"></require>
  <div class="au-animate col s12" style="padding-top:0.75rem;">
    <div class="row">
      <form class="col s12 b-radius-card z-depth-1" style="margin-bottom:20px;" id='sequencer-controller'>
        <div class="row canvas-as-bg  b-radius-card blue" >
          <a class="waves-effect waves-${!muted?'green accent-3':'red'} btn-flat center-align" style="padding:0;margin-right:10px;" click.delegate='handlePlay()'>
            <template if.bind='!playing'>
              <i class="material-icons green-text text-accent-3" style="vertical-align:sub;font-size:2.3rem">play_arrow</i>
            </template>
            <template if.bind='playing'>
              <i class="material-icons red-text" style="vertical-align:sub;font-size:2.3rem" >stop</i>
            </template>
          </a>
          <a class="waves-effect waves-${!mixer?'green accent-3':'white'} btn-flat center-align" style="padding:0;" click.delegate='toggleMixer()'>
            <i class="material-icons ${!mixer?'green':'white'}-text text-accent-3" style="vertical-align:sub;font-size:2.3rem">equalizer</i>
          </a>
          <slider min="0" max="220" label="Tempo" val.two-way="tempo" noslider.one-time="true" channel='tempo' inline.one-time="true" preset="120"></slider>
          <div class="input-field inline" style="margin-top:0;" if.bind="isOpen===1">
            <knob min="0" max="100" label="Volume" canvas.bind="true" preset.one-time="volume" val.two-way="volume"></knob>
          </div>
        </div>
      </form>
    </div>
    <table class=" striped"  id='sequencer-notes'>
      <thead style="border-bottom:0;">
        <tr>
          <td style="width:5.88%;"></td>
          <td repeat.for="i of 16" style="width:5.88%;">
            <div class="${notePlaying-1==i?'blue':'grey'} lighten-2" style="height:5px;"></div>
          </td>
        </tr>
      </thead>
      <tbody if.bind="!mixer">
          <tr repeat.for="drum of drums" >
            <td style="width:5.88%;cursor:pointer;height:36px;" class="blue-text " click.delegate="playSample(drum.sound)">${drum.name}</td>
            <td class="waves-effect waves-light  ${scheduled[$parent.$index][i]==true?'blue':'green accent-3'}" repeat.for="i of 16" style="width:5.88%;border-left:1px solid #fff;border-bottom:1px solid #fff;min-height:36px;" click.delegate="addNote($event, $parent.$index, i)">
            </td>
          </tr>
      </tbody>
    </table>
    <table class="striped" if.bind="mixer" id='sequencer-mixer'>
      <tbody>
        <tr repeat.for="drum of drums">
          <td style="width:5.88%;cursor:pointer" class="blue-text" click.delegate="playSample(drum.sound)">${drum.name}</td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="80" label="Volume" preset.one-time="drum.volume" val.two-way="drum.volume"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="80" label="Pitch" preset.one-time="drum.volume" val.two-way="drum.pitch"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="80" label="High" preset.one-time="drum.high" val.two-way="drum.high"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min.one-time="drum.range.high[0]" max.one-time="drum.range.high[1]" label="High Freq" preset.one-time="drum.highFreq" val.two-way="drum.highFreq"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="80" label="Mid" preset.one-time="drum.mid" val.two-way="drum.mid"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min.one-time="drum.range.mid[0]" max.one-time="drum.range.mid[1]" label="Mid Freq" preset.one-time="drum.midFreq" val.two-way="drum.midFreq"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="80" label="Low" preset.one-time="drum.low" val.two-way="drum.low"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min.one-time="drum.range.low[0]" max.one-time="drum.range.low[1]" label="Low Freq" preset.one-time="drum.lowFreq" val.two-way="drum.lowFreq"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="200" label="Cutoff" preset.one-time="drum.cutoff" val.two-way="drum.cutoff"></knob>
            </div>
          </td>
          <td >
            <div class="input-field inline" style="margin-top:0;">
              <knob min="0" max="20" label="Q" preset.one-time="drum.Q" val.two-way="drum.Q"></knob>
            </div>
          </td>
          <td>
            <div class="input-field inline" style="">
              <label for="" style="position:relative;top:0;">Filter Type</label>
              <select name="" id="" class="browser-default" value.bind="drum.filterType">
                <option value="lowpass">lowpass</option>
                <option value="highpass">highpass</option>
                <option value="bandpass">bandpass</option>
                <option value="lowshelf">lowshelf</option>
                <option value="highshelf">highshelf</option>
                <option value="peaking">peaking</option>
                <option value="notch">notch</option>
                <option value="allpass">allpass</option>
              </select>
            </div>
          </td></tr>
      </tbody>
    </table>
  </div>
</template>
