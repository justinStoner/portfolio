<template>
  <require from="../components/sound-wave"></require>
  <require from="./styles/sequencer.css"></require>
  <require from="../components/knob"></require>
  <require from="../components/sound-wave"></require>
  <div class="au-animate col s12">
    <div class="card" id="sequencer">
      <div class="card-content" style="padding:0.75rem">
        <div class="row">
          <form class="col s12 b-radius-card z-depth-1" style="margin-bottom:20px;" id='sequencer-controller'>
            <div class="row canvas-as-bg  b-radius-card blue" >
              <a class="waves-effect waves-${!muted?'green accent-3':'red'} btn-flat center-align" style="padding:0;" click.delegate='handlePlay()'>
                <template if.bind='!playing'>
                  <i class="material-icons green-text text-accent-3" style="vertical-align:sub;font-size:2.3rem">play_arrow</i>
                </template>
                <template if.bind='playing'>
                  <i class="material-icons red-text" style="vertical-align:sub;font-size:2.3rem" >stop</i>
                </template>
              </a>
              <div class="input-field inline" style="margin-top:0;">
                <p style="padding-bottom:3px;margin-top:-24px;">Tempo</p>
                <button class="btn waves-effect waves-light green accent-3" style="display:inline-block;width:36px;padding:0;margin-right:5px;" click.delegate="changeTempo(false)"><i class="material-icons">remove</i></button>
                <p style="width:40px;display:inline-block;">${tempo}</p>
                <button class="btn waves-effect waves-light green accent-3" style="display:inline-block;width:36px;padding:0;margin-left:5px;" click.delegate="changeTempo(true)"><i class="material-icons">add</i></button>
              </div>
              <div class="input-field inline" style="margin-top:0;">
                <knob min="0" max="100" label="Volume" canvas.bind="true" val.two-way="volume"></knob>
              </div>
            </div>
            <!-- <sound-wave ab.bind='ab' canvas-id='sequencer-controller' style=""></sound-wave> -->
          </form>
        </div>
        <table>
          <tbody>
              <tr>
                <td style="width:5.88%"></td>
                <td repeat.for="i of 16" style="width:5.88%">
                  <div class="${notePlaying-1==i?'blue':'grey'} lighten-2" style="height:5px;"></div>
                </td>
              </tr>
              <tr repeat.for="drum of drums">
                <td style="width:5.88%;cursor:pointer" class="blue-text" click.delegate="playSample(drum.sound)">${drum.name}</td>
                <td repeat.for="i of 16" style="width:5.88%"><a class="waves-effect waves-light btn ${scheduled[$parent.$index][i]==true?'blue':'green accent-3'}" style="width:100%;padding:0rem;" click.delegate="addNote($event, $parent.$index, i)"></a></td>
              </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>
