<template>
  <require from="../components/sound-wave"></require>
  <require from="./styles/sequencer.css"></require>
  <require from="../components/knob"></require>
  <require from="../components/slider"></require>
  <require from="../effects/compressor"></require>
  <div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col" id="sequencer">
      <div class="b-radius-card mdl-shadow--2dp" id="sequencer-controller">
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--1-col-phone" style="padding-top:13px;">

            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect ${!mixer?'mdl-color-text--white':'mdl-color-text--green-A400'} mdl-color--grey-200" style="margin-right:15px;" click.delegate='handlePlay()'>
              <template if.bind='!ds.playing'>
                <i class="material-icons mdl-color-text--green-A400" >play_arrow</i>
              </template>
              <template if.bind='ds.playing'>
                <i class="material-icons mdl-color-text--red-500">stop</i>
              </template>
            </button>

            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect ${!mixer?'mdl-color-text--grey-400':'mdl-color-text--green-A400'} mdl-color--grey-200" click.delegate='toggleMixer()'>
              <i class="material-icons">equalizer</i>
            </button>
          </div>
          <div class="mdl-cell mdl-cell--1-col mdl-cell--2-col-tablet mdl-cell--1-col-phone">
            <slider min="0" max="100" label="Volume" val.two-way="ds.volume" canvas.bind="true"  preset.one-time="volume"></slider>
          </div>
          <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--1-col-phone">
            <slider min="0" max="220" label="Tempo" val.two-way="ds.tempo" canvas.bind="true" channel='tempo' preset="120"></slider>
          </div>
          <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--1-col-phone text-center">
            <p style="margin-bottom:0px;">Visualizer</p>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect ${ab.showVisualizer?'mdl-color-text--green-A400 mdl-color--white':'mdl-color--green-A400 mdl-color-text--white'}" css="width:42px;height:42px;min-width:42px;border:3px solid ${ab.showVisualizer?'#00e676;':'#fff;'}" click.trigger="ab.showVisualizer=!ab.showVisualizer" id='visualizer'>
              <i class="material-icons">graphic_eq</i>
            </button>
          </div>

        </div>

      </div>
      <sound-wave ab.bind='ab' canvas-id='sequencer-controller' mode='drums' if.bind="ab.showVisualizer"></sound-wave>
    </div>
    <div class="mdl-cell mdl-cell--12-col ">
      <table class=" striped"  id='sequencer-notes'>
        <thead style="border-bottom:0;">
          <tr>
            <td style="width:5.88%;"></td>
            <td repeat.for="i of 16" style="width:5.88%;">
              <div class="${ds.notePlaying-1==i?'mdl-color--blue-300':'mdl-color--white'} lighten-2" style="height:5px;"></div>
            </td>
          </tr>
        </thead>
        <tbody if.bind="!mixer">
            <tr repeat.for="drum of ds.drums" >
              <td style="width:5.88%;cursor:pointer;height:36px;" class="mdl-color-text--blue-500 " click.trigger="playSample(drum.sound)">${drum.name}</td>
              <td class=" ${ds.scheduled[$parent.$index][i]==true?'mdl-color--blue-500':'mdl-color--green-A400'}" repeat.for="i of 16" style="width:5.88%;border-left:1px solid #fff;border-bottom:1px solid #fff;min-height:36px;cursor:pointer" click.trigger="addNote($event, $parent.$index, i)">
              </td>
            </tr>
        </tbody>
      </table>
      <div class="drum-mixer" if.bind="mixer" id='sequencer-mixer'>
        <ul>
          <li repeat.for="drum of ds.drums">
            <div style="cursor:pointer;height:81px;text-align:center;" class="mdl-color-text--blue-500" click.trigger="playSample(drum.sound)">${drum.name}</div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="100" label="Volume" preset.one-time="drum.volume" val.two-way="drum.volume"></slider>
              </div>
            </div>
            <div if.bind="!isMobile">
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="200" label="Pitch" preset.one-time="drum.pitch" val.two-way="drum.pitch" display-offset="-100"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="80" label="High" preset.one-time="drum.high" val.two-way="drum.high"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min.one-time="drum.range.high[0]" max.one-time="drum.range.high[1]" label="High Freq" preset.one-time="drum.highFreq" val.two-way="drum.highFreq"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="80" label="Mid" preset.one-time="drum.mid" val.two-way="drum.mid"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min.one-time="drum.range.mid[0]" max.one-time="drum.range.mid[1]" label="Mid Freq" preset.one-time="drum.midFreq" val.two-way="drum.midFreq"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="80" label="Low" preset.one-time="drum.low" val.two-way="drum.low"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min.one-time="drum.range.low[0]" max.one-time="drum.range.low[1]" label="Low Freq" preset.one-time="drum.lowFreq" val.two-way="drum.lowFreq"></slider>
              </div>
            </div>
            <div if.bind="!isMobile">
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="100" label="Reverb" preset.one-time="drum.reverbLevel" val.two-way="drum.reverbLevel"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="200" label="Cutoff" preset.one-time="drum.cutoff" val.two-way="drum.cutoff"></slider>
              </div>
            </div>
            <div >
              <div class="input-field inline" style="margin-top:0;">
                <slider min="0" max="20" label="Q" preset.one-time="drum.Q" val.two-way="drum.Q"></slider>
              </div>
            </div>
            <div>
              <div class="input-field inline" style="">
                <label for="" style="position:relative;top:0;">Filter Type</label>
                <select name="" id="" class="browser-default" value.bind="drum.filterType">
                  <option value="lowpass">lowpass</option>
                  <option value="highpass">highpass</option>
                  <option value="bandpass">bandpass</option>
                  <option value="lowshelf">lowshelf</option>
                  <option value="highshelf">highshelf</option>
                  <option value="peaking">peaking</option>
                  <option value="notch">notch</option>
                  <option value="allpass">allpass</option>
                </select>
              </div>
            </div>
          </li>
      </ul>
    </div>

  </div>
  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">
    <compressor mode="drums"></compressor>
  </div>
</div>
</template>
